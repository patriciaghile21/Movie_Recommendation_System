{% extends 'mainpage/base.html' %}

{% block content %}
<div style="background-color: #FFB6C1; padding: 40px; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); max-width: 1200px; margin: 0 auto;">

    <h1 style="color: #880e4f; border-bottom: 2px solid #c2185b; padding-bottom: 10px; text-shadow: 1px 1px 0px rgba(255,255,255,0.3);">
        üìö All Movies (Seen it? Rate it!)
    </h1>

    <p style="color: #6a1b4d; font-weight: bold;">Rate the movies you've already watched so they do not appear here anymore.</p>

    <form method="GET" action="{% url 'movie_library' %}" style="margin: 25px 0; display: flex; gap: 10px;">
        <input type="text" name="search" placeholder="Search for a movie..." value="{{ search_query|default:'' }}"
               style="flex: 1; padding: 12px 20px; border-radius: 50px; border: 2px solid #e91e63; outline: none; font-size: 16px;">
        <button type="submit" style="background-color: #e91e63; color: white; border: none; padding: 10px 25px; border-radius: 50px; cursor: pointer; font-weight: bold;">üîç Search</button>
        {% if search_query %}<a href="{% url 'movie_library' %}" style="text-decoration: none; color: #880e4f; align-self: center; font-weight: bold; margin-left: 10px;">Clear</a>{% endif %}
    </form>

    <div style="display: flex; flex-wrap: wrap; gap: 20px; margin-top: 30px;">
        {% for movie in movies %}
        <div style="background: white; width: 200px; padding: 15px; border-radius: 12px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); text-align: center; border: 2px solid #ff69b4;">

            <a href="{% url 'movie_detail' movie.id %}" style="text-decoration: none;">
                <h3 style="margin: 10px 0; color: #880e4f; font-size: 18px; hover: underline;">{{ movie.name }}</h3>
            </a>

            <p style="color: #555; font-size: 12px; margin-bottom: 15px;">
                {% for genre in movie.genres.all %}
                    {{ genre.name }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </p>

            <a href="{% url 'add_review' movie.id %}"
               style="display: inline-block; background-color: #e91e63; color: white; padding: 8px 15px; text-decoration: none; border-radius: 50px; font-weight: bold; font-size: 14px; box-shadow: 0 2px 4px rgba(0,0,0,0.2);">
               ‚≠ê Rate Movie
            </a>

        </div>
        {% empty %}
        <p style="color: #880e4f; font-weight: bold;">No movies found matching your search.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}